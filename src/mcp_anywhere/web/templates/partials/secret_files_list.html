<!-- Secret Files List Partial -->
<div id="secret-files-list">
    {% if server.secret_files %}
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">File Name</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Environment Variable</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Size</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Uploaded</th>
                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for secret_file in server.secret_files %}
                {% if secret_file.is_active %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">
                        {{ secret_file.original_filename }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">
                        {{ secret_file.env_var_name }}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-600">
                        {{ secret_file.description or "No description" }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                        {% if secret_file.file_size %}
                            {% if secret_file.file_size < 1024 %}
                                {{ secret_file.file_size }} B
                            {% elif secret_file.file_size < 1048576 %}
                                {{ "%.1f"|format(secret_file.file_size / 1024) }} KB
                            {% else %}
                                {{ "%.1f"|format(secret_file.file_size / 1048576) }} MB
                            {% endif %}
                        {% else %}
                            Unknown
                        {% endif %}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                        {{ secret_file.created_at.strftime('%Y-%m-%d %H:%M') if secret_file.created_at else 'Unknown' }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <button hx-delete="/servers/{{ server.id }}/secrets/{{ secret_file.id }}"
                                hx-target="#secret-files-list"
                                hx-swap="outerHTML"
                                hx-confirm="Are you sure you want to delete this secret file?"
                                class="text-red-600 hover:text-red-900 text-sm font-medium">
                            Delete
                        </button>
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-8">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
        </svg>
        <h3 class="mt-4 text-lg font-medium text-gray-900">No secret files uploaded</h3>
        <p class="mt-2 text-sm text-gray-500">Upload secret files like service account keys, certificates, or other credentials.</p>
    </div>
    {% endif %}
</div>
